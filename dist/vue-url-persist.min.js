!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self)["vue-url-persist"]={})}(this,(function(t){"use strict";function e(t){return t.split(/[\\.\\[]/).map(t=>/\]$/.test(t)?t.slice(0,t.length-1):t)}function r(t,r,n=null){"string"==typeof r&&(r=e(r));let i=t;for(const t of r)try{if(null==(i=Reflect.get(i,t)))return n}catch(t){return n}return i}class n{constructor(t={}){this.key="qb",Object.assign(this,t)}static setInitData(t,n,i){const o=r(t,n,null),s=i[n];void 0!==s&&JSON.stringify(o)!==JSON.stringify(s)&&(null==o||"string"==typeof o||"number"==typeof o||Array.isArray(o)?function(t,r,n){"string"==typeof r&&(r=e(r));let i=t;for(let t=0,e=r.length;t<e;t++){const o=r[t];if(t===e-1)return i[o]=n,!0;if("object"!=typeof(i=i[o]))return!1}}(t,n,s):"object"==typeof o&&"object"==typeof s&&Object.assign(r(t,n),s))}initUrlDataByCreated(t,e){const r=this.key,i=JSON.parse(t.$route.query[r]||"{}");e.forEach(e=>{n.setInitData(t,e,i),t.$watch(e,function(t,e,r=null){let n,i=r;return function(...r){return new Promise(o=>{n&&clearTimeout(n),n=setTimeout(()=>o(i=t.apply(this,r)),e),setTimeout(()=>o(i),e)})}}((function(n){i[e]=n;const o=JSON.stringify(i);t.$route.query[r]!==o&&t.$router.replace({query:{...t.$route.query,[r]:o}})}),1e3),{deep:!0})})}initUrlDataByRouteUpdate(t,e,r){const i=JSON.parse(r.query[this.key]||"{}");e.forEach(e=>n.setInitData(t,e,i))}generateInitUrlData(...t){const e=this;return{created(){e.initUrlDataByCreated(this,t)},beforeRouteUpdate(r,n,i){e.initUrlDataByRouteUpdate(this,t,r),i()},beforeRouteEnter(r,n,i){i(n=>e.initUrlDataByRouteUpdate(n,t,r))}}}config(t){Object.assign(this,t)}}const i=new n,o=i.generateInitUrlData.bind(i);t.VueUrlPersist=n,t.default=i,t.generateInitUrlData=o,t.vueUrlPersist=i,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=vue-url-persist.min.js.map
